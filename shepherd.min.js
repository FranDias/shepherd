/*! shepherd 0.5.1 */
(function(){var t,e,n,i,r,s,o,h,l,u,p,c,d,a,f,v=function(t,e){return function(){return t.apply(e,arguments)}},g={}.hasOwnProperty,y=function(t,e){function n(){this.constructor=t}for(var i in e)g.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};f=Tether.Utils,h=f.extend,d=f.removeClass,s=f.addClass,u=f.hasClass,e=f.Evented,l=f.getBounds,a=f.uniqueId,n=new e,t={top:"bottom center",left:"middle right",right:"middle left",bottom:"top center"},o=function(t){var e;return e=document.createElement("div"),e.innerHTML=t,e.children[0]},p=function(t,e){var n,i,r,s,o;return n=null!=(i=null!=(r=null!=(s=null!=(o=t.matches)?o:t.matchesSelector)?s:t.webkitMatchesSelector)?r:t.mozMatchesSelector)?i:t.oMatchesSelector,n.call(t,e)},c=function(t,e){var n,i,r,s,o,h;if(null==t)return t;if("object"==typeof t)return t;for(s=t.split(" "),s.length>e.length&&(s[0]=s.slice(0,+(s.length-e.length)+1||9e9).join(" "),s.splice(1,s.length-e.length)),i={},n=o=0,h=e.length;h>o;n=++o)r=e[n],i[r]=s[n];return i},i=function(e){function n(t,e){this.tour=t,this.destroy=v(this.destroy,this),this.scrollTo=v(this.scrollTo,this),this.complete=v(this.complete,this),this.cancel=v(this.cancel,this),this.isOpen=v(this.isOpen,this),this.hide=v(this.hide,this),this.show=v(this.show,this),this.setOptions(e)}return y(n,e),n.prototype.setOptions=function(t){var e,n,i,r;if(this.options=null!=t?t:{},this.destroy(),this.id=this.options.id||this.id||"step-"+a(),this.options.when){r=this.options.when;for(e in r)n=r[e],this.on(e,n,this)}return null!=(i=this.options).buttons?(i=this.options).buttons:i.buttons=[{text:"Next",action:this.tour.next}]},n.prototype.getTour=function(){return this.tour},n.prototype.bindAdvance=function(){var t,e,n,i,r=this;return i=c(this.options.advanceOn,["selector","event"]),t=i.event,n=i.selector,e=function(t){if(r.isOpen())if(null!=n){if(p(t.target,n))return r.tour.next()}else if(r.el&&t.target===r.el)return r.tour.next()},document.body.addEventListener(t,e),this.on("destroy",function(){return document.body.removeEventListener(t,e)})},n.prototype.getAttachTo=function(){var t;if(t=c(this.options.attachTo,["element","on"]),null==t&&(t={}),"string"==typeof t.element&&(t.element=document.querySelector(t.element),null==t.element))throw new Error("Shepherd step's attachTo was not found in the page");return t},n.prototype.setupTether=function(){var e,n,i;if("undefined"==typeof Tether||null===Tether)throw new Error("Using the attachment feature of Shepherd requires the Tether library");return n=this.getAttachTo(),e=t[n.on||"right"],null==n.element&&(n.element="viewport",e="middle center"),i={classPrefix:"shepherd",element:this.el,constraints:[{to:"window",pin:!0,attachment:"together"}],target:n.element,offset:n.offset||"0 0",attachment:e},this.tether=new Tether(h(i,this.options.tetherOptions))},n.prototype.show=function(){var t=this;return null==this.el&&this.render(),s(this.el,"shepherd-open"),document.body.setAttribute("data-shepherd-step",this.id),this.setupTether(),this.options.scrollTo&&setTimeout(function(){return t.scrollTo()}),this.trigger("show")},n.prototype.hide=function(){var t;return d(this.el,"shepherd-open"),document.body.removeAttribute("data-shepherd-step"),null!=(t=this.tether)&&t.destroy(),this.tether=null,this.trigger("hide")},n.prototype.isOpen=function(){return u(this.el,"shepherd-open")},n.prototype.cancel=function(){return this.tour.cancel(),this.trigger("cancel")},n.prototype.complete=function(){return this.tour.complete(),this.trigger("complete")},n.prototype.scrollTo=function(){var t;return t=this.getAttachTo().element,null!=t?t.scrollIntoView():void 0},n.prototype.destroy=function(){var t;return null!=this.el&&(document.body.removeChild(this.el),delete this.el),null!=(t=this.tether)&&t.destroy(),this.tether=null,this.trigger("destroy")},n.prototype.render=function(){var t,e,n,i,r,s,h,l,u,p,c,d,a,f,v,g,y;if(null!=this.el&&this.destroy(),this.el=o("<div class='shepherd-step "+(null!=(v=this.options.classes)?v:"")+"' data-id='"+this.id+"'></div>"),i=document.createElement("div"),i.className="shepherd-content",this.el.appendChild(i),s=document.createElement("header"),i.appendChild(s),null!=this.options.title&&(s.innerHTML+="<h3 class='shepherd-title'>"+this.options.title+"</h3>",this.el.className+=" shepherd-has-title"),this.options.showCancelLink&&(h=o("<a href class='shepherd-cancel-link'>âœ•</a>"),s.appendChild(h),this.el.className+=" shepherd-has-cancel-link",this.bindCancelLink(h)),null!=this.options.text){for(p=o("<div class='shepherd-text'></div>"),u=this.options.text,"string"==typeof u&&(u=[u]),c=0,a=u.length;a>c;c++)l=u[c],p.innerHTML+="<p>"+l+"</p>";i.appendChild(p)}if(r=document.createElement("footer"),this.options.buttons){for(e=o("<ul class='shepherd-buttons'></ul>"),g=this.options.buttons,d=0,f=g.length;f>d;d++)n=g[d],t=o("<li><a class='shepherd-button "+(null!=(y=n.classes)?y:"")+"'>"+n.text+"</a>"),e.appendChild(t),this.bindButtonEvents(n,t.querySelector("a"));r.appendChild(e)}return i.appendChild(r),document.body.appendChild(this.el),this.setupTether(),this.options.advanceOn?this.bindAdvance():void 0},n.prototype.bindCancelLink=function(t){var e=this;return t.addEventListener("click",function(t){return t.preventDefault(),e.cancel()})},n.prototype.bindButtonEvents=function(t,e){var n,i,r,s,o=this;null==t.events&&(t.events={}),null!=t.action&&(t.events.click=t.action),s=t.events;for(n in s)i=s[n],"string"==typeof i&&(r=i,i=function(){return o.tour.show(r)}),e.addEventListener(n,i);return this.on("destroy",function(){var r,s;r=t.events,s=[];for(n in r)i=r[n],s.push(e.removeEventListener(n,i));return s})},n}(e),r=function(t){function e(t){var e,i,r,s,o,h,l=this;for(this.options=null!=t?t:{},this.hide=v(this.hide,this),this.complete=v(this.complete,this),this.cancel=v(this.cancel,this),this.back=v(this.back,this),this.next=v(this.next,this),this.steps=null!=(o=this.options.steps)?o:[],h=["complete","cancel","hide","start","show","active","inactive"],i=function(t){return l.on(t,function(e){return null==e&&(e={}),e.tour=l,n.trigger(t,e)})},r=0,s=h.length;s>r;r++)e=h[r],i(e)}return y(e,t),e.prototype.addStep=function(t,e){var n;return null==e&&(e=t),e instanceof i?e.tour=this:(("string"==(n=typeof t)||"number"===n)&&(e.id=t.toString()),e=h({},this.options.defaults,e),e=new i(this,e)),this.steps.push(e),this},e.prototype.getById=function(t){var e,n,i,r;for(r=this.steps,n=0,i=r.length;i>n;n++)if(e=r[n],e.id===t)return e},e.prototype.getCurrentStep=function(){return this.currentStep},e.prototype.next=function(){var t;return t=this.steps.indexOf(this.currentStep),t===this.steps.length-1?(this.hide(t),this.trigger("complete"),this.done()):this.show(t+1)},e.prototype.back=function(){var t;return t=this.steps.indexOf(this.currentStep),this.show(t-1)},e.prototype.cancel=function(){var t;return null!=(t=this.currentStep)&&t.hide(),this.trigger("cancel"),this.done()},e.prototype.complete=function(){var t;return null!=(t=this.currentStep)&&t.hide(),this.trigger("complete"),this.done()},e.prototype.hide=function(){var t;return null!=(t=this.currentStep)&&t.hide(),this.trigger("hide"),this.done()},e.prototype.done=function(){return n.activeTour=null,d(document.body,"shepherd-active"),this.trigger("inactive",{tour:this})},e.prototype.show=function(t){var e;return null==t&&(t=0),this.currentStep?this.currentStep.hide():(s(document.body,"shepherd-active"),this.trigger("active",{tour:this})),n.activeTour=this,e="string"==typeof t?this.getById(t):this.steps[t],e?(this.trigger("show",{step:e,previous:this.currentStep}),this.currentStep=e,e.show()):void 0},e.prototype.start=function(){return this.trigger("start"),this.currentStep=null,this.next()},e}(e),h(n,{Tour:r,Step:i,Evented:e}),window.Shepherd=n}).call(this);